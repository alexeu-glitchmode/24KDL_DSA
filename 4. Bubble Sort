// Bài 1
// Bài 1.1

#include <stdio.h>
#include<stdlib.h>
#include<time.h>
void initializeArray(float arr[], int n, float min, float max){
    for(int i = 0; i<n; i++){
        arr[i] = min + (float)rand() / RAND_MAX * (max - min);
    }
}
void swap(float *x, float *y){
    float temp = *x;
    *x = *y;
    *y = temp;
}
void bubbleSort(float arr[], int n){
    for(int i = 0; i<n-1 ; i++){
        for(int j = 0; j<n-1 - i; j++){
            if(arr[j] > arr[j+1]){
                swap(&arr[j], &arr[j+1]);
            }
        }
    }
}
int main()
{
    float arr[100];
    int n;
    float min = -1000.0;
    float max = 1000.0;
    printf("n: ");
    scanf("%d", &n);

    time_t t;
    srand((unsigned)time(&t));
    initializeArray(arr,n,min,max);
    printf("Mang sau khi khoi tao ngau nhien: \n");
    for(int i = 0; i<n; i++){
        printf("%.2f ", arr[i]);
    }
    printf("\n");
    
    bubbleSort(arr,n);
    printf("Mang sau khi sap xep: \n");
    for(int i = 0; i<n; i++){
        printf("%.2f ", arr[i]);
    }

    return 0;
}

//Bài 1.2
#include <stdio.h>
#include<stdlib.h>
#include<time.h>
void initializeChars(char a[], int n) {
    char alphabet[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
    int len = 52;
    for (int i = 0; i < n; i++) {
        a[i] = alphabet[rand() % len];
    }
}

void swap(char *x, char *y){
    char temp = *x;
    *x = *y;
    *y = temp;
}
void bubbleSort(char arr[], int n){
    for(int i = 0; i<n-1 ; i++){
        for(int j = 0; j<n-1 - i; j++){
            if(arr[j] > arr[j+1]){
                swap(&arr[j], &arr[j+1]);
            }
        }
    }
}
int main()
{
    char arr[100];
    int n;
    
    printf("n: ");
    scanf("%d", &n);

    time_t t;
    srand((unsigned)time(&t));
    initializeChars(arr,n);
    printf("Chuoi sau khi khoi tao ngau nhien: \n");
    for(int i = 0; i<n; i++){
        printf("%c", arr[i]);
    }
    printf("\n");
    
    bubbleSort(arr,n);
    printf("Chuoi sau khi sap xep: \n");
    for(int i = 0; i<n; i++){
        printf("%c", arr[i]);
    }

    return 0;



//Bài 1.3
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

typedef struct {
    float a;
    float b;
    float c;
} Triple;

float F(Triple x) {
    return x.a - 2 * x.b + 3 * x.c;
}

Triple randomTriple(float min, float max) {
    Triple t;
    t.a = min + (float)rand() / RAND_MAX * (max - min);
    t.b = min + (float)rand() / RAND_MAX * (max - min);
    t.c = min + (float)rand() / RAND_MAX * (max - min);
    return t;
}

void initializeRandomArray(Triple arr[], int n, float min, float max) {
    for (int i = 0; i < n; i++) {
        arr[i] = randomTriple(min, max);
    }
}

void swap(Triple *x, Triple *y) {
    Triple tmp = *x;
    *x = *y;
    *y = tmp;
}

void bubbleSort(Triple arr[], int n) {
    for (int i = 0; i < n - 1; i++) {
        for (int j = 0; j < n - 1 - i; j++) {
            if (F(arr[j]) > F(arr[j + 1])) {
                swap(&arr[j], &arr[j + 1]);
            }
        }
    }
}

int main() {
    int n = 10;
    Triple a[100];

    srand((unsigned)time(NULL));

    initializeRandomArray(a, n, -10.0f, 10.0f);

    printf("Mang ngau nhien:\n");
    for (int i = 0; i < n; i++) {
        printf("(%.2f, %.2f, %.2f)  F=%.2f\n",
               a[i].a, a[i].b, a[i].c, F(a[i]));
    }

    bubbleSort(a, n);

    printf("\nMang sau khi sap xep:\n");
    for (int i = 0; i < n; i++) {
        printf("(%.2f, %.2f, %.2f)  F=%.2f\n",
               a[i].a, a[i].b, a[i].c, F(a[i]));
    }

    return 0;
}



//Bài 2

#include <stdio.h>
#include <stdlib.h>
#include <time.h>

void initializeArray(int arr[], int n, int min, int max) {
    for (int i = 0; i < n; i++)
        arr[i] = min + rand() % (max - min + 1);
}

void deletetion(int arr[], int *n, int pos) {
    for (int i = pos; i < *n - 1; i++)
        arr[i] = arr[i + 1];
    (*n)--;
}

void removeLinearSearch(int arr[], int *n, int *steps) {
    *steps = 0;
    for (int i = 0; i < *n; i++) {
        for (int j = i + 1; j < *n; j++) {
            (*steps)++;              
            if (arr[i] == arr[j]) {
                deletion(arr, n, j);
                j--;
            }
        }
    }
}

void bubbleSort(int arr[], int n, int *steps) {
    for (int i = 0; i < n - 1; i++)
        for (int j = 0; j < n - i - 1; j++) {
            (*steps)++;              
            if (arr[j] > arr[j + 1]) {
                int tmp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = tmp;
            }
        }
}

void removeBubbleSort(int arr[], int *n) {
    for (int i = 0; i < *n - 1; i++) {
        if (arr[i] == arr[i + 1]) {
            deletion(arr, n, i + 1);
            i--;
        }
    }
}

int main() {
    int arr1[1000], arr2[1000];
    int n = 10;
    int k[] = {100, 1000, 10000};

    srand((unsigned)time(NULL));

    for (int t = 0; t < 3; t++) {
        int fre1[1000] = {0};
        int fre2[1000] = {0};

        for (int i = 0; i < k[t]; i++) {
            int n1 = n, n2 = n;
            int steps1 = 0, steps2 = 0;

            initializeArray(arr1, n, -10,10);
            for (int j = 0; j < n; j++) arr2[j] = arr1[j];

            removeLinearSearch(arr1, &n1, &steps1);
            bubbleSort(arr2, n2, &steps2);
            removeBubbleSort(arr2, &n2);

            fre1[steps1]++;
            fre2[steps2]++;
        }

        float mean1 = 0, mean2 = 0;
        for (int i = 0; i < 1000; i++) {
            mean1 += i * fre1[i];
            mean2 += i * fre2[i];
        }
        mean1 /= k[t];
        mean2 /= k[t];

        printf("k = %d\n", k[t]);
        printf("PA1 (LinearSearch): Mean steps = %.2f\n", mean1);
        printf("PA2 (BubbleSort)  : Mean steps = %.2f\n\n", mean2);
    }

    return 0;
}
